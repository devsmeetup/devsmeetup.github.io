{"version":3,"sources":["scripts/dom.ts","../node_modules/fetch-jsonp/build/fetch-jsonp.js","scripts/request.ts","scripts/index.ts"],"names":[],"mappings":"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","file":"scripts.53f29c05.map","sourceRoot":"../src","sourcesContent":["import { MeetupEvent } from './types';\n\nconst createCalendarIcon = (size = 24) =>\n  `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\" viewBox=\"0 0 24 24\">\n    <path d=\"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 18H4V8h16v13z\"/>\n  </svg>`;\n\nconst createClockIcon = (size = 24) =>\n  `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\" viewBox=\"0 0 24 24\">\n    <defs>\n      <path id=\"a\" d=\"M0 0h24v24H0z\"/>\n    </defs>\n    <g>\n      <path d=\"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10 10-4.5 10-10S17.5 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z\"/>\n      <path d=\"M12.5 7H11v6l5.2 3.2.8-1.3-4.5-2.7z\"/>\n    </g>\n  </svg>`;\n\nconst createRSVPIcon = (size = 24) =>\n  `<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${size}\" height=\"${size}\" viewBox=\"0 0 24 24\">\n    <path d=\"M19 1H5c-1.1 0-1.99.9-1.99 2L3 15.93c0 .69.35 1.3.88 1.66L12 23l8.11-5.41c.53-.36.88-.97.88-1.66L21 3c0-1.1-.9-2-2-2zm-9 15l-5-5 1.41-1.41L10 13.17l7.59-7.59L19 7l-9 9z\"/>\n  </svg>`;\n\nconst formatTeaserDate = (value: string) =>\n  new Date(value)\n    .toLocaleDateString('en-US', {\n      day: '2-digit',\n      month: 'short',\n    })\n    .split(' ');\n\nexport const createTeaser = (meetup: MeetupEvent) => {\n  const [month, day] = formatTeaserDate(meetup.local_date);\n  return `\n  <div class=\"teaser\">\n    <div class=\"teaser-caption\">Upcoming Meetup</div>\n    <h2 class=\"teaser-title\">${meetup.name}</h2>\n    <small class=\"teaser-meta\">\n      ${createCalendarIcon(12)}\n      <span>${day} ${month}</span>\n      ${createClockIcon(12)}\n      <span>${meetup.local_time}</span>\n    </small>\n    <div class=\"teaser-description\">${meetup.description}</div>\n    <div class=\"teaser-footer\">\n      <a class=\"teaser-link\" href=\"${\n        meetup.link\n      }\" rel=\"nofollow\">${createRSVPIcon(16)} RSVP</a>\n    </div>\n  </div>`;\n};\n","(function (global, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define(['exports', 'module'], factory);\n  } else if (typeof exports !== 'undefined' && typeof module !== 'undefined') {\n    factory(exports, module);\n  } else {\n    var mod = {\n      exports: {}\n    };\n    factory(mod.exports, mod);\n    global.fetchJsonp = mod.exports;\n  }\n})(this, function (exports, module) {\n  'use strict';\n\n  var defaultOptions = {\n    timeout: 5000,\n    jsonpCallback: 'callback',\n    jsonpCallbackFunction: null\n  };\n\n  function generateCallbackFunction() {\n    return 'jsonp_' + Date.now() + '_' + Math.ceil(Math.random() * 100000);\n  }\n\n  function clearFunction(functionName) {\n    // IE8 throws an exception when you try to delete a property on window\n    // http://stackoverflow.com/a/1824228/751089\n    try {\n      delete window[functionName];\n    } catch (e) {\n      window[functionName] = undefined;\n    }\n  }\n\n  function removeScript(scriptId) {\n    var script = document.getElementById(scriptId);\n    if (script) {\n      document.getElementsByTagName('head')[0].removeChild(script);\n    }\n  }\n\n  function fetchJsonp(_url) {\n    var options = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n    // to avoid param reassign\n    var url = _url;\n    var timeout = options.timeout || defaultOptions.timeout;\n    var jsonpCallback = options.jsonpCallback || defaultOptions.jsonpCallback;\n\n    var timeoutId = undefined;\n\n    return new Promise(function (resolve, reject) {\n      var callbackFunction = options.jsonpCallbackFunction || generateCallbackFunction();\n      var scriptId = jsonpCallback + '_' + callbackFunction;\n\n      window[callbackFunction] = function (response) {\n        resolve({\n          ok: true,\n          // keep consistent with fetch API\n          json: function json() {\n            return Promise.resolve(response);\n          }\n        });\n\n        if (timeoutId) clearTimeout(timeoutId);\n\n        removeScript(scriptId);\n\n        clearFunction(callbackFunction);\n      };\n\n      // Check if the user set their own params, and if not add a ? to start a list of params\n      url += url.indexOf('?') === -1 ? '?' : '&';\n\n      var jsonpScript = document.createElement('script');\n      jsonpScript.setAttribute('src', '' + url + jsonpCallback + '=' + callbackFunction);\n      if (options.charset) {\n        jsonpScript.setAttribute('charset', options.charset);\n      }\n      jsonpScript.id = scriptId;\n      document.getElementsByTagName('head')[0].appendChild(jsonpScript);\n\n      timeoutId = setTimeout(function () {\n        reject(new Error('JSONP request to ' + _url + ' timed out'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        window[callbackFunction] = function () {\n          clearFunction(callbackFunction);\n        };\n      }, timeout);\n\n      // Caught if got 404/500\n      jsonpScript.onerror = function () {\n        reject(new Error('JSONP request to ' + _url + ' failed'));\n\n        clearFunction(callbackFunction);\n        removeScript(scriptId);\n        if (timeoutId) clearTimeout(timeoutId);\n      };\n    });\n  }\n\n  // export as global function\n  /*\n  let local;\n  if (typeof global !== 'undefined') {\n    local = global;\n  } else if (typeof self !== 'undefined') {\n    local = self;\n  } else {\n    try {\n      local = Function('return this')();\n    } catch (e) {\n      throw new Error('polyfill failed because global object is unavailable in this environment');\n    }\n  }\n  local.fetchJsonp = fetchJsonp;\n  */\n\n  module.exports = fetchJsonp;\n});","import jsonp from 'fetch-jsonp';\n\nconst noop = () => {};\n\nexport const enum RequestStatus {\n  Fetching,\n  Success,\n  Error,\n}\n\nexport type RequestEvent<T = any> =\n  | {\n      status: RequestStatus.Fetching;\n    }\n  | {\n      status: RequestStatus.Success;\n      data: T;\n    }\n  | {\n      status: RequestStatus.Error;\n      error: Error;\n    };\n\nexport type RequestCallback<T> = (event: RequestEvent<T>) => void;\n\nexport const request = <T = any>(\n  url: string,\n  callback: RequestCallback<T> = noop\n) => {\n  callback({ status: RequestStatus.Fetching });\n\n  return jsonp(url)\n    .then(res => res.json())\n    .then(({ data }) => {\n      callback({ status: RequestStatus.Success, data });\n      return data;\n    })\n    .catch(error => {\n      callback({ status: RequestStatus.Error, error });\n      return Promise.reject(error);\n    });\n};\n","import { createTeaser } from './dom';\nimport { RequestStatus, request } from './request';\nimport { MeetupEvent } from './types';\n\nconst eventElement = document.getElementById('teaser')!;\n\nrequest<[MeetupEvent]>(\n  'https://api.meetup.com/Devsmeetup-Freiburg/events?&photo-host=public&page=1&status=upcoming',\n  ev => {\n    let content = '';\n\n    switch (ev.status) {\n      case RequestStatus.Fetching:\n        content = 'Loading ...';\n        break;\n      case RequestStatus.Success:\n        content = createTeaser(ev.data[0]);\n        break;\n      case RequestStatus.Error:\n        content = ev.error.message;\n        break;\n      default:\n        break;\n    }\n\n    eventElement.innerHTML = content;\n  }\n);\n"]}